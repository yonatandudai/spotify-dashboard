#!/bin/bash
# Vercel Deployment Configuration Script
# Replace YOUR_VERCEL_APP_URL with your actual Vercel deployment URL

echo "üöÄ Spotify Vercel Deployment Setup"
echo "=================================="
echo ""
echo "Your Vercel app URL should be something like: https://spotify-dashboard-abc123.vercel.app"
echo ""
echo "üìã Steps to complete deployment:"
echo ""
echo "1. üîó Get your Vercel app URL:"
echo "   - Go to: https://vercel.com/dashboard"
echo "   - Find your spotify project"
echo "   - Copy the URL (https://your-app.vercel.app)"
echo ""
echo "2. üéµ Update Spotify App Settings:"
echo "   - Go to: https://developer.spotify.com/dashboard"
echo "   - Click your app ‚Üí Edit Settings"
echo "   - In Redirect URIs, add: YOUR_VERCEL_URL/api/auth/callback"
echo "   - Example: https://spotify-dashboard-abc123.vercel.app/api/auth/callback"
echo "   - Keep existing: http://localhost:8000/api/auth/callback"
echo "   - Save changes"
echo ""
echo "3. ‚öôÔ∏è  Set Vercel Environment Variables:"
echo "   - Go to your Vercel project ‚Üí Settings ‚Üí Environment Variables"
echo "   - Add these variables:"
echo "     SPOTIFY_CLIENT_ID=f8e09266e4de4d09a15815a12c642edf"
echo "     SPOTIFY_CLIENT_SECRET=efd72444843046898c1073578de7937f"
echo "     SPOTIFY_REDIRECT_URI=YOUR_VERCEL_URL/api/auth/callback"
echo "     SESSION_SECRET_KEY=fw1hC0FUAlN8shaTZcL03dynijcFW1tAsao2hAtK8N4"
echo "     FRONTEND_URL=YOUR_VERCEL_URL"
echo ""
echo "4. üîÑ Redeploy:"
echo "   - Vercel will auto-redeploy after env var changes"
echo "   - Or manually trigger redeploy from dashboard"
echo ""
echo "üîß Common Issues & Solutions:"
echo ""
echo "Issue: 404 NOT_FOUND error"
echo "Solution: Check that SPOTIFY_REDIRECT_URI matches exactly in both:"
echo "  - Spotify Developer Dashboard Redirect URIs"
echo "  - Vercel Environment Variables"
echo ""
echo "Issue: Environment variables not working"
echo "Solution: Make sure to set them for 'Production' environment in Vercel"
echo ""
echo "Issue: Still getting errors"
echo "Solution: Check Vercel Function logs in dashboard ‚Üí Functions tab"
echo ""
echo "‚úÖ Test your deployment:"
echo "1. Go to YOUR_VERCEL_URL"
echo "2. Click 'Login with Spotify'"
echo "3. Should redirect to Spotify login"
echo "4. After login, should return to your app with data"
